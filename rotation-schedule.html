<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0a7ea4">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Î°úÌÖåÏù¥ÏÖò ÏùºÏ†ï">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <title>Î≥∏Í≥º 3ÌïôÎÖÑ Î°úÌÖåÏù¥ÏÖò ÏùºÏ†ï Í¥ÄÎ¶¨</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');
        
        :root {
            --primary: #0a7ea4;
            --primary-dark: #065a75;
            --secondary: #34d399;
            --accent: #f59e0b;
            --bg-main: #f8fafc;
            --bg-card: #ffffff;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow: rgba(15, 23, 42, 0.08);
            --shadow-lg: rgba(15, 23, 42, 0.15);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            background: var(--bg-card);
            padding: 30px 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px var(--shadow);
            margin-bottom: 30px;
            border-left: 6px solid var(--primary);
        }
        
        h1 {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 15px;
            font-weight: 400;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 380px 1fr;
            gap: 30px;
            align-items: start;
        }
        
        .calendar-section {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px var(--shadow);
            position: sticky;
            top: 20px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border);
        }
        
        .calendar-header h2 {
            font-size: 22px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }
        
        .calendar-day-header {
            text-align: center;
            padding: 10px;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
            background: var(--bg-main);
        }
        
        .calendar-day:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.05);
        }
        
        .calendar-day.empty {
            background: transparent;
            cursor: default;
        }
        
        .calendar-day.empty:hover {
            transform: none;
        }
        
        .calendar-day.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary-dark);
            box-shadow: 0 4px 12px rgba(10, 126, 164, 0.3);
        }
        
        .calendar-day.has-schedule {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
            color: white;
            font-weight: 600;
        }
        
        .schedule-section {
            background: var(--bg-card);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px var(--shadow);
            min-height: 600px;
        }
        
        .schedule-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border);
        }
        
        .schedule-header h2 {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .btn-export {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(10, 126, 164, 0.2);
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        .btn-export:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(10, 126, 164, 0.3);
        }
        
        .btn-export:active {
            transform: translateY(0);
        }
        
        .teams-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .team-schedule {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .team-schedule:hover {
            border-color: var(--primary);
            box-shadow: 0 8px 24px var(--shadow-lg);
            transform: translateY(-2px);
        }
        
        .team-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border);
        }
        
        .team-name {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .add-schedule-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 6px 14px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .add-schedule-btn:hover {
            background: #10b981;
            transform: scale(1.05);
        }
        
        .schedule-item {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }
        
        .time-input, .location-input {
            padding: 10px 14px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 14px;
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.2s ease;
            background: white;
        }
        
        .time-input {
            width: 100px;
            font-weight: 500;
        }
        
        .location-input {
            flex: 1;
        }
        
        .time-input:focus, .location-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(10, 126, 164, 0.1);
        }
        
        .remove-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        
        .remove-btn:hover {
            background: #dc2626;
            transform: scale(1.05);
        }
        
        .notes-section {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid var(--accent);
            border-radius: 16px;
            padding: 20px;
        }
        
        .notes-section h3 {
            font-size: 16px;
            font-weight: 700;
            color: #92400e;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .notes-section h3::before {
            content: "üìå";
            font-size: 18px;
        }
        
        .notes-textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #fbbf24;
            border-radius: 10px;
            font-size: 14px;
            font-family: 'Noto Sans KR', sans-serif;
            resize: vertical;
            min-height: 100px;
            background: white;
            transition: all 0.2s ease;
        }
        
        .notes-textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
        }
        
        .empty-state {
            text-align: center;
            padding: 80px 40px;
            color: var(--text-secondary);
        }
        
        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .empty-state h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .empty-state p {
            font-size: 15px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.2s ease;
        }
        
        .modal.show {
            display: flex;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border);
        }
        
        .modal-header h3 {
            font-size: 22px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--text-secondary);
            line-height: 1;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        
        .close-modal:hover {
            background: var(--bg-main);
            color: var(--text-primary);
        }
        
        .export-message {
            background: var(--bg-main);
            padding: 20px;
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            line-height: 1.8;
            white-space: pre-wrap;
            color: var(--text-primary);
            border: 2px solid var(--border);
        }
        
        .copy-btn {
            width: 100%;
            margin-top: 20px;
            background: var(--secondary);
            color: white;
            border: none;
            padding: 14px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .copy-btn:hover {
            background: #10b981;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 211, 153, 0.3);
        }
        
        .copy-btn.copied {
            background: var(--primary);
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .calendar-section {
                position: relative;
                top: 0;
            }
            
            .teams-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üè• Î≥∏Í≥º 3ÌïôÎÖÑ Î°úÌÖåÏù¥ÏÖò ÏùºÏ†ï Í¥ÄÎ¶¨</h1>
            <p class="subtitle">4Í∞ú Ï°∞ ÌÜµÌï© Ïä§ÏºÄÏ§Ñ Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú</p>
        </header>
        
        <div class="main-content">
            <div class="calendar-section">
                <div class="calendar-header">
                    <h2 id="calendarTitle">2026ÎÖÑ 3Ïõî</h2>
                    <div style="display: flex; gap: 8px;">
                        <button onclick="changeMonth(-1)" style="background: var(--primary); color: white; border: none; width: 36px; height: 36px; border-radius: 8px; cursor: pointer; font-size: 18px; font-weight: bold;">‚Äπ</button>
                        <button onclick="changeMonth(1)" style="background: var(--primary); color: white; border: none; width: 36px; height: 36px; border-radius: 8px; cursor: pointer; font-size: 18px; font-weight: bold;">‚Ä∫</button>
                    </div>
                </div>
                <div class="calendar-grid" id="calendar">
                    <!-- Calendar will be generated by JavaScript -->
                </div>
            </div>
            
            <div class="schedule-section">
                <div id="scheduleContent">
                    <div class="empty-state">
                        <div class="empty-state-icon">üìÖ</div>
                        <h3>ÎÇ†ÏßúÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</h3>
                        <p>ÏôºÏ™Ω Îã¨Î†•ÏóêÏÑú ÏùºÏ†ïÏùÑ Í¥ÄÎ¶¨Ìï† ÎÇ†ÏßúÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="exportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üì§ ÏùºÏ†ï ÎÇ¥Î≥¥ÎÇ¥Í∏∞</h3>
                <button class="close-modal" onclick="closeModal()">√ó</button>
            </div>
            <div class="export-message" id="exportMessage"></div>
            <button class="copy-btn" onclick="copyToClipboard()">ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨</button>
        </div>
    </div>

    <script>
        // Data structure to store schedules
        const scheduleData = {};
        let selectedDate = null;
        let currentYear = 2026;
        let currentMonth = 3; // March (1-based)
        
        // Month data for 2026
        const monthData = {
            3: { name: '3Ïõî', firstDay: 6, days: 31 },  // March 2026 starts on Saturday
            4: { name: '4Ïõî', firstDay: 2, days: 30 },  // April
            5: { name: '5Ïõî', firstDay: 4, days: 31 },  // May
            6: { name: '6Ïõî', firstDay: 0, days: 30 },  // June
            7: { name: '7Ïõî', firstDay: 2, days: 31 },  // July
            8: { name: '8Ïõî', firstDay: 5, days: 31 },  // August
            9: { name: '9Ïõî', firstDay: 1, days: 30 },  // September
            10: { name: '10Ïõî', firstDay: 3, days: 31 }, // October
            11: { name: '11Ïõî', firstDay: 6, days: 30 }, // November
            12: { name: '12Ïõî', firstDay: 1, days: 31 }  // December
        };
        
        // Initialize calendar
        function initCalendar() {
            const calendar = document.getElementById('calendar');
            const daysOfWeek = ['Ïùº', 'Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†'];
            
            // Clear calendar
            calendar.innerHTML = '';
            
            // Add day headers
            daysOfWeek.forEach(day => {
                const header = document.createElement('div');
                header.className = 'calendar-day-header';
                header.textContent = day;
                calendar.appendChild(header);
            });
            
            const monthInfo = monthData[currentMonth];
            const firstDay = monthInfo.firstDay;
            const daysInMonth = monthInfo.days;
            
            // Update title
            document.getElementById('calendarTitle').textContent = `2026ÎÖÑ ${monthInfo.name}`;
            
            // Add empty cells for days before the 1st
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day empty';
                calendar.appendChild(emptyDay);
            }
            
            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                dayCell.className = 'calendar-day';
                dayCell.textContent = day;
                dayCell.dataset.date = `2026-${String(currentMonth).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                dayCell.onclick = () => selectDate(dayCell.dataset.date);
                calendar.appendChild(dayCell);
            }
            
            updateCalendarIndicators();
        }
        
        function changeMonth(delta) {
            currentMonth += delta;
            
            // Limit to March-December 2026
            if (currentMonth < 3) currentMonth = 3;
            if (currentMonth > 12) currentMonth = 12;
            
            // Deselect current date when changing months
            selectedDate = null;
            
            initCalendar();
            
            // Show empty state
            document.getElementById('scheduleContent').innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">üìÖ</div>
                    <h3>ÎÇ†ÏßúÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</h3>
                    <p>ÏôºÏ™Ω Îã¨Î†•ÏóêÏÑú ÏùºÏ†ïÏùÑ Í¥ÄÎ¶¨Ìï† ÎÇ†ÏßúÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</p>
                </div>
            `;
        }
        
        function selectDate(date) {
            selectedDate = date;
            
            // Update calendar UI
            document.querySelectorAll('.calendar-day').forEach(day => {
                day.classList.remove('selected');
                if (day.dataset.date === date) {
                    day.classList.add('selected');
                }
            });
            
            // Initialize schedule for this date if not exists
            if (!scheduleData[date]) {
                scheduleData[date] = {
                    teams: {
                        '1Ï°∞': [],
                        '2Ï°∞': [],
                        '3Ï°∞': [],
                        '4Ï°∞': []
                    },
                    notes: ''
                };
            }
            
            renderSchedule();
        }
        
        function renderSchedule() {
            if (!selectedDate) return;
            
            const data = scheduleData[selectedDate];
            const dateObj = new Date(selectedDate);
            const dateStr = `${dateObj.getMonth() + 1}Ïõî ${dateObj.getDate()}Ïùº`;
            
            const content = `
                <div class="schedule-header">
                    <h2>${dateStr} ÏùºÏ†ï</h2>
                    <button class="btn-export" onclick="exportSchedule()">üì§ ÎÇ¥Î≥¥ÎÇ¥Í∏∞</button>
                </div>
                
                <div class="teams-container">
                    ${Object.keys(data.teams).map(team => `
                        <div class="team-schedule">
                            <div class="team-header">
                                <span class="team-name">${team}</span>
                                <button class="add-schedule-btn" onclick="addScheduleItem('${team}')">+ Ï∂îÍ∞Ä</button>
                            </div>
                            <div id="team-${team}">
                                ${renderTeamSchedules(team)}
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="notes-section">
                    <h3>Ï∞∏Í≥†ÏÇ¨Ìï≠</h3>
                    <textarea 
                        class="notes-textarea" 
                        placeholder="Ï∂îÍ∞ÄÎ°ú Í≥µÏßÄÌï† ÏÇ¨Ìï≠ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî..."
                        onchange="updateNotes(this.value)"
                    >${data.notes}</textarea>
                </div>
            `;
            
            document.getElementById('scheduleContent').innerHTML = content;
            updateCalendarIndicators();
        }
        
        function renderTeamSchedules(team) {
            const schedules = scheduleData[selectedDate].teams[team];
            if (schedules.length === 0) {
                return '<p style="color: var(--text-secondary); font-size: 14px; padding: 10px 0;">ÏùºÏ†ïÏùÑ Ï∂îÍ∞ÄÌï¥Ï£ºÏÑ∏Ïöî</p>';
            }
            
            return schedules.map((item, index) => `
                <div class="schedule-item">
                    <input 
                        type="text" 
                        class="time-input" 
                        placeholder="09:00"
                        value="${item.time}"
                        onchange="updateScheduleItem('${team}', ${index}, 'time', this.value)"
                    />
                    <input 
                        type="text" 
                        class="location-input" 
                        placeholder="Ïã§Ïäµ Ïû•ÏÜå ÏûÖÎ†•"
                        value="${item.location}"
                        onchange="updateScheduleItem('${team}', ${index}, 'location', this.value)"
                    />
                    <button class="remove-btn" onclick="removeScheduleItem('${team}', ${index})">ÏÇ≠Ï†ú</button>
                </div>
            `).join('');
        }
        
        function addScheduleItem(team) {
            scheduleData[selectedDate].teams[team].push({
                time: '',
                location: ''
            });
            renderSchedule();
        }
        
        function removeScheduleItem(team, index) {
            scheduleData[selectedDate].teams[team].splice(index, 1);
            renderSchedule();
        }
        
        function updateScheduleItem(team, index, field, value) {
            scheduleData[selectedDate].teams[team][index][field] = value;
            updateCalendarIndicators();
        }
        
        function updateNotes(value) {
            scheduleData[selectedDate].notes = value;
        }
        
        function updateCalendarIndicators() {
            document.querySelectorAll('.calendar-day').forEach(day => {
                if (day.dataset.date && scheduleData[day.dataset.date]) {
                    const hasSchedules = Object.values(scheduleData[day.dataset.date].teams)
                        .some(team => team.length > 0);
                    if (hasSchedules) {
                        day.classList.add('has-schedule');
                    } else {
                        day.classList.remove('has-schedule');
                    }
                }
            });
        }
        
        function exportSchedule() {
            if (!selectedDate) return;
            
            const data = scheduleData[selectedDate];
            const dateObj = new Date(selectedDate);
            const dateStr = `${dateObj.getMonth() + 1}Ïõî ${dateObj.getDate()}Ïùº`;
            const dayOfWeek = ['Ïùº', 'Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†'][dateObj.getDay()];
            
            let message = `üìÖ ${dateStr}(${dayOfWeek}) Î°úÌÖåÏù¥ÏÖò ÏùºÏ†ï\n`;
            message += `${'='.repeat(40)}\n\n`;
            
            // Add team schedules
            Object.keys(data.teams).forEach(team => {
                const schedules = data.teams[team];
                if (schedules.length > 0) {
                    message += `„Äê ${team} „Äë\n`;
                    schedules.forEach(item => {
                        if (item.time && item.location) {
                            message += `  ${item.time}  ‚Üí  ${item.location}\n`;
                        }
                    });
                    message += `\n`;
                }
            });
            
            // Add notes if exists
            if (data.notes.trim()) {
                message += `üìå Ï∞∏Í≥†ÏÇ¨Ìï≠\n`;
                message += `${'-'.repeat(40)}\n`;
                message += `${data.notes}\n`;
            }
            
            message += `\n${'='.repeat(40)}`;
            
            document.getElementById('exportMessage').textContent = message;
            document.getElementById('exportModal').classList.add('show');
        }
        
        function closeModal() {
            document.getElementById('exportModal').classList.remove('show');
        }
        
        function copyToClipboard() {
            const message = document.getElementById('exportMessage').textContent;
            navigator.clipboard.writeText(message).then(() => {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = '‚úì Î≥µÏÇ¨ ÏôÑÎ£å!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('copied');
                }, 2000);
            });
        }
        
        // Close modal when clicking outside
        document.getElementById('exportModal').addEventListener('click', (e) => {
            if (e.target.id === 'exportModal') {
                closeModal();
            }
        });
        
        // Initialize
        initCalendar();
        
        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed'));
            });
        }
    </script>
</body>
</html>
