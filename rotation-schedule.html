<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0a7ea4">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ë¡œí…Œì´ì…˜ ì¼ì •">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <title>ë³¸ê³¼ 3í•™ë…„ ë¡œí…Œì´ì…˜ ì¼ì • ê´€ë¦¬</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');
        
        :root {
            --primary: #0a7ea4;
            --primary-dark: #065a75;
            --secondary: #34d399;
            --accent: #f59e0b;
            --bg-main: #f8fafc;
            --bg-card: #ffffff;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow: rgba(15, 23, 42, 0.08);
            --shadow-lg: rgba(15, 23, 42, 0.15);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            background: var(--bg-card);
            padding: 30px 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px var(--shadow);
            margin-bottom: 30px;
            border-left: 6px solid var(--primary);
        }
        
        h1 {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 15px;
            font-weight: 400;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 380px 1fr;
            gap: 30px;
            align-items: start;
        }
        
        .calendar-section {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px var(--shadow);
            position: sticky;
            top: 20px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border);
        }
        
        .calendar-header h2 {
            font-size: 22px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }
        
        .calendar-day-header {
            text-align: center;
            padding: 10px;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
            background: var(--bg-main);
        }
        
        .calendar-day:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.05);
        }
        
        .calendar-day.empty {
            background: transparent;
            cursor: default;
        }
        
        .calendar-day.empty:hover {
            transform: none;
        }
        
        .calendar-day.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary-dark);
            box-shadow: 0 4px 12px rgba(10, 126, 164, 0.3);
        }
        
        .calendar-day.has-schedule {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
            color: white;
            font-weight: 600;
        }
        
        .calendar-day.has-exam {
            position: relative;
        }
        
        .calendar-day.has-exam::after {
            content: "â­";
            position: absolute;
            top: 2px;
            right: 2px;
            font-size: 12px;
        }
        
        .calendar-day[data-subject-color] {
            position: relative;
            font-weight: 600;
        }
        
        .calendar-day[data-subject-color]::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            border-radius: 0 0 10px 10px;
            background: attr(data-subject-color);
        }
        
        .exam-toggle {
            background: #f3f4f6;
            border: 2px solid #d1d5db;
            padding: 10px 18px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .exam-toggle:hover {
            background: #e5e7eb;
            transform: scale(1.05);
        }
        
        .exam-toggle.active {
            background: #fef3c7;
            border-color: #fbbf24;
        }
        
        .subject-manager {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 16px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .manage-subjects-btn {
            width: 100%;
            background: var(--primary);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.2s ease;
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        .manage-subjects-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(10, 126, 164, 0.3);
        }
        
        .subject-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .subject-modal.show {
            display: flex;
        }
        
        .subject-modal-content {
            background: white;
            border-radius: 20px;
            width: 100%;
            max-width: 700px;
            max-height: 85vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        
        .subject-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 30px;
            border-bottom: 2px solid var(--border);
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }
        
        .subject-modal-header h2 {
            font-size: 22px;
            font-weight: 700;
            margin: 0;
        }
        
        .subject-modal-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            font-size: 24px;
            cursor: pointer;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .subject-modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .subject-modal-body {
            padding: 30px;
            overflow-y: auto;
            flex: 1;
        }
        
        .subject-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .subject-item {
            background: white;
            border: 2px solid #fbbf24;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .subject-color-picker {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 3px solid #e5e7eb;
            cursor: pointer;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }
        
        .subject-color-picker:hover {
            transform: scale(1.1);
            border-color: #9ca3af;
        }
        
        .color-palette {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            padding: 12px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            margin-top: 8px;
            width: 100%;
        }
        
        .color-option {
            width: 36px;
            height: 36px;
            border-radius: 6px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s ease;
        }
        
        .color-option:hover {
            transform: scale(1.15);
            border-color: #374151;
        }
        
        .color-option.selected {
            border-color: #374151;
            border-width: 3px;
            box-shadow: 0 0 0 2px white, 0 0 0 4px #374151;
        }
        
        .subject-input, .date-input {
            padding: 8px 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 13px;
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        .subject-input {
            flex: 1;
            min-width: 120px;
        }
        
        .date-input {
            width: 110px;
        }
        
        .remove-subject-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
        }
        
        .add-subject-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
        }
        
        .add-subject-btn:hover {
            background: #10b981;
        }
        
        .schedule-section {
            background: var(--bg-card);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px var(--shadow);
            min-height: 600px;
        }
        
        .schedule-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border);
        }
        
        .schedule-header h2 {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .btn-export {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(10, 126, 164, 0.2);
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        .btn-export:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(10, 126, 164, 0.3);
        }
        
        .btn-export:active {
            transform: translateY(0);
        }
        
        .teams-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .team-schedule {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .team-schedule:hover {
            border-color: var(--primary);
            box-shadow: 0 8px 24px var(--shadow-lg);
            transform: translateY(-2px);
        }
        
        .team-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border);
        }
        
        .team-name {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .add-schedule-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 6px 14px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .add-schedule-btn:hover {
            background: #10b981;
            transform: scale(1.05);
        }
        
        .schedule-item {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }
        
        .time-input, .location-input {
            padding: 10px 14px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 14px;
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.2s ease;
            background: white;
        }
        
        .time-input {
            width: 100px;
            font-weight: 500;
        }
        
        .location-input {
            flex: 1;
        }
        
        .time-input:focus, .location-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(10, 126, 164, 0.1);
        }
        
        .remove-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        
        .remove-btn:hover {
            background: #dc2626;
            transform: scale(1.05);
        }
        
        .notes-section {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid var(--accent);
            border-radius: 16px;
            padding: 20px;
        }
        
        .notes-section h3 {
            font-size: 16px;
            font-weight: 700;
            color: #92400e;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .notes-section h3::before {
            content: "ğŸ“Œ";
            font-size: 18px;
        }
        
        .notes-textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #fbbf24;
            border-radius: 10px;
            font-size: 14px;
            font-family: 'Noto Sans KR', sans-serif;
            resize: vertical;
            min-height: 100px;
            background: white;
            transition: all 0.2s ease;
        }
        
        .notes-textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
        }
        
        .empty-state {
            text-align: center;
            padding: 80px 40px;
            color: var(--text-secondary);
        }
        
        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .empty-state h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .empty-state p {
            font-size: 15px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.2s ease;
        }
        
        .modal.show {
            display: flex;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border);
        }
        
        .modal-header h3 {
            font-size: 22px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--text-secondary);
            line-height: 1;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        
        .close-modal:hover {
            background: var(--bg-main);
            color: var(--text-primary);
        }
        
        .export-message {
            background: var(--bg-main);
            padding: 20px;
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            line-height: 1.8;
            white-space: pre-wrap;
            color: var(--text-primary);
            border: 2px solid var(--border);
        }
        
        .copy-btn {
            width: 100%;
            margin-top: 20px;
            background: var(--secondary);
            color: white;
            border: none;
            padding: 14px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .copy-btn:hover {
            background: #10b981;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 211, 153, 0.3);
        }
        
        .copy-btn.copied {
            background: var(--primary);
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .calendar-section {
                position: relative;
                top: 0;
            }
            
            .teams-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¥ ë³¸ê³¼ 3í•™ë…„ ë¡œí…Œì´ì…˜ ì¼ì • ê´€ë¦¬</h1>
            <p class="subtitle">4ê°œ ì¡° í†µí•© ìŠ¤ì¼€ì¤„ ê´€ë¦¬ ì‹œìŠ¤í…œ</p>
        </header>
        
        <div class="main-content">
            <div class="calendar-section">
                <div class="calendar-header">
                    <h2 id="calendarTitle">2026ë…„ 3ì›”</h2>
                    <div style="display: flex; gap: 8px;">
                        <button onclick="changeMonth(-1)" style="background: var(--primary); color: white; border: none; width: 36px; height: 36px; border-radius: 8px; cursor: pointer; font-size: 18px; font-weight: bold;">â€¹</button>
                        <button onclick="changeMonth(1)" style="background: var(--primary); color: white; border: none; width: 36px; height: 36px; border-radius: 8px; cursor: pointer; font-size: 18px; font-weight: bold;">â€º</button>
                    </div>
                </div>
                <div class="calendar-grid" id="calendar">
                    <!-- Calendar will be generated by JavaScript -->
                </div>
                
                <div class="subject-manager" style="margin-top: 25px;">
                    <button class="manage-subjects-btn" onclick="openSubjectModal()">
                        âš™ï¸ ê³¼ ê´€ë¦¬
                    </button>
                    <button class="manage-subjects-btn" onclick="openMembersModal()" style="margin-top: 10px; background: var(--secondary);">
                        ğŸ‘¥ ì¡°ì› ê´€ë¦¬
                    </button>
                    <button class="manage-subjects-btn" onclick="openDashboard()" style="margin-top: 10px; background: #f59e0b;">
                        ğŸ“Š í†µê³„
                    </button>
                </div>
            </div>
            
            <div class="schedule-section">
                <div id="scheduleContent">
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“…</div>
                        <h3>ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</h3>
                        <p>ì™¼ìª½ ë‹¬ë ¥ì—ì„œ ì¼ì •ì„ ê´€ë¦¬í•  ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="exportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ“¤ ì¼ì • ë‚´ë³´ë‚´ê¸°</h3>
                <button class="close-modal" onclick="closeModal()">Ã—</button>
            </div>
            <div class="export-message" id="exportMessage"></div>
            <button class="copy-btn" onclick="copyToClipboard()">í´ë¦½ë³´ë“œì— ë³µì‚¬</button>
        </div>
    </div>
    
    <div class="subject-modal" id="subjectModal">
        <div class="subject-modal-content">
            <div class="subject-modal-header">
                <h2>ğŸ“š ê³¼ ë‹¨ìœ„ ê¸°ê°„ ì„¤ì •</h2>
                <button class="subject-modal-close" onclick="closeSubjectModal()">Ã—</button>
            </div>
            <div class="subject-modal-body">
                <div class="subject-list" id="subjectList">
                    <!-- Subject items will be rendered here -->
                </div>
                <button class="add-subject-btn" onclick="addSubject()">+ ê³¼ ì¶”ê°€</button>
            </div>
        </div>
    </div>
    
    <div class="subject-modal" id="membersModal">
        <div class="subject-modal-content">
            <div class="subject-modal-header" style="background: linear-gradient(135deg, var(--secondary) 0%, #10b981 100%);">
                <h2>ğŸ‘¥ ì¡°ì› ëª…ë‹¨ ê´€ë¦¬</h2>
                <button class="subject-modal-close" onclick="closeMembersModal()">Ã—</button>
            </div>
            <div class="subject-modal-body">
                <div id="membersContent">
                    <!-- Members will be rendered here -->
                </div>
            </div>
        </div>
    </div>
    
    <div class="subject-modal" id="weeklyModal">
        <div class="subject-modal-content" style="max-width: 95%; max-height: 95vh;">
            <div class="subject-modal-header" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">
                <h2>ğŸ“… ì£¼ê°„ ì‹œê°„í‘œ</h2>
                <button class="subject-modal-close" onclick="closeWeeklyView()">Ã—</button>
            </div>
            <div class="subject-modal-body" style="padding: 20px; overflow: auto;">
                <div id="weeklyContent">
                    <!-- Weekly timetable will be rendered here -->
                </div>
            </div>
        </div>
    </div>
    
    <div class="subject-modal" id="dashboardModal">
        <div class="subject-modal-content" style="max-width: 900px;">
            <div class="subject-modal-header" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                <h2>ğŸ“Š í†µê³„ ëŒ€ì‹œë³´ë“œ</h2>
                <button class="subject-modal-close" onclick="closeDashboard()">Ã—</button>
            </div>
            <div class="subject-modal-body" style="padding: 30px; overflow: auto;">
                <div id="dashboardContent">
                    <!-- Dashboard will be rendered here -->
                </div>
            </div>
        </div>
    </div>
    
    <div class="subject-modal" id="templateModal">
        <div class="subject-modal-content">
            <div class="subject-modal-header" style="background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);">
                <h2>ğŸ“‹ í…œí”Œë¦¿ ê´€ë¦¬</h2>
                <button class="subject-modal-close" onclick="closeTemplateModal()">Ã—</button>
            </div>
            <div class="subject-modal-body">
                <div id="templateContent">
                    <!-- Template management will be rendered here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data structure to store schedules
        let scheduleData = {};
        let selectedDate = null;
        let currentYear = 2026;
        let currentMonth = 3; // March (1-based)
        let subjects = []; // Array of {name, color, startDate, endDate}
        let examDates = new Set(); // Set of dates with exams
        let showingColorPicker = null; // Track which subject is showing color picker
        let teamMembers = {
            '1ì¡°': [],
            '2ì¡°': [],
            '3ì¡°': [],
            '4ì¡°': []
        }; // Team members: {teamName: [{name, phone}]}
        let templates = []; // Saved templates: [{name, data}]
        
        // Month data for 2026
        const monthData = {
            3: { name: '3ì›”', firstDay: 0, days: 31 },  // March 1, 2026 is Sunday
            4: { name: '4ì›”', firstDay: 3, days: 30 },  // April 1, 2026 is Wednesday
            5: { name: '5ì›”', firstDay: 5, days: 31 },  // May 1, 2026 is Friday
            6: { name: '6ì›”', firstDay: 1, days: 30 },  // June 1, 2026 is Monday
            7: { name: '7ì›”', firstDay: 3, days: 31 },  // July 1, 2026 is Wednesday
            8: { name: '8ì›”', firstDay: 6, days: 31 },  // August 1, 2026 is Saturday
            9: { name: '9ì›”', firstDay: 2, days: 30 },  // September 1, 2026 is Tuesday
            10: { name: '10ì›”', firstDay: 4, days: 31 }, // October 1, 2026 is Thursday
            11: { name: '11ì›”', firstDay: 0, days: 30 }, // November 1, 2026 is Sunday
            12: { name: '12ì›”', firstDay: 2, days: 31 }  // December 1, 2026 is Tuesday
        };
        
        // 20 color palette
        const colorPalette = [
            '#ef4444', // ë¹¨ê°•
            '#f97316', // ì£¼í™©
            '#f59e0b', // ë…¸ë‘-ì£¼í™©
            '#eab308', // ë…¸ë‘
            '#84cc16', // ì—°ë‘
            '#22c55e', // ì´ˆë¡
            '#10b981', // ì²­ë¡
            '#14b8a6', // í„°ì½°ì´ì¦ˆ
            '#06b6d4', // í•˜ëŠ˜
            '#0ea5e9', // íŒŒë‘
            '#3b82f6', // ì§„íŒŒë‘
            '#6366f1', // ì¸ë””ê³ 
            '#8b5cf6', // ë³´ë¼
            '#a855f7', // ìì£¼
            '#d946ef', // ë§ˆì  íƒ€
            '#ec4899', // í•‘í¬
            '#f43f5e', // ë¡œì¦ˆ
            '#64748b', // íšŒìƒ‰
            '#78716c', // ê°ˆìƒ‰
            '#57534e'  // ì§„ê°ˆìƒ‰
        ];
        
        // Load data from localStorage
        function loadData() {
            const saved = localStorage.getItem('rotationScheduleData');
            if (saved) {
                try {
                    scheduleData = JSON.parse(saved);
                } catch (e) {
                    scheduleData = {};
                }
            }
            
            const savedSubjects = localStorage.getItem('rotationSubjects');
            if (savedSubjects) {
                try {
                    subjects = JSON.parse(savedSubjects);
                } catch (e) {
                    subjects = [];
                }
            }
            
            const savedExams = localStorage.getItem('rotationExams');
            if (savedExams) {
                try {
                    examDates = new Set(JSON.parse(savedExams));
                } catch (e) {
                    examDates = new Set();
                }
            }
            
            const savedMembers = localStorage.getItem('rotationTeamMembers');
            if (savedMembers) {
                try {
                    teamMembers = JSON.parse(savedMembers);
                } catch (e) {
                    teamMembers = { '1ì¡°': [], '2ì¡°': [], '3ì¡°': [], '4ì¡°': [] };
                }
            }
            
            const savedTemplates = localStorage.getItem('rotationTemplates');
            if (savedTemplates) {
                try {
                    templates = JSON.parse(savedTemplates);
                } catch (e) {
                    templates = [];
                }
            }
        }
        
        // Save data to localStorage
        function saveData() {
            try {
                localStorage.setItem('rotationScheduleData', JSON.stringify(scheduleData));
                localStorage.setItem('rotationSubjects', JSON.stringify(subjects));
                localStorage.setItem('rotationExams', JSON.stringify([...examDates]));
                localStorage.setItem('rotationTeamMembers', JSON.stringify(teamMembers));
                localStorage.setItem('rotationTemplates', JSON.stringify(templates));
            } catch (e) {
                console.error('ë°ì´í„° ì €ì¥ ì‹¤íŒ¨:', e);
            }
        }
        
        // Get subject for a specific date
        function getSubjectForDate(dateStr) {
            for (let subject of subjects) {
                if (dateStr >= subject.startDate && dateStr <= subject.endDate) {
                    return subject;
                }
            }
            return null;
        }
        
        // Initialize calendar
        function initCalendar() {
            const calendar = document.getElementById('calendar');
            const daysOfWeek = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            
            calendar.innerHTML = '';
            
            daysOfWeek.forEach(day => {
                const header = document.createElement('div');
                header.className = 'calendar-day-header';
                header.textContent = day;
                calendar.appendChild(header);
            });
            
            const monthInfo = monthData[currentMonth];
            const firstDay = monthInfo.firstDay;
            const daysInMonth = monthInfo.days;
            
            document.getElementById('calendarTitle').textContent = `2026ë…„ ${monthInfo.name}`;
            
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day empty';
                calendar.appendChild(emptyDay);
            }
            
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                dayCell.className = 'calendar-day';
                dayCell.textContent = day;
                const dateStr = `2026-${String(currentMonth).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                dayCell.dataset.date = dateStr;
                
                // Add subject color
                const subject = getSubjectForDate(dateStr);
                if (subject) {
                    dayCell.style.setProperty('--subject-color', subject.color);
                    dayCell.setAttribute('data-subject-color', subject.color);
                }
                
                // Add exam marker
                if (examDates.has(dateStr)) {
                    dayCell.classList.add('has-exam');
                }
                
                dayCell.onclick = () => selectDate(dateStr);
                calendar.appendChild(dayCell);
            }
            
            // Apply subject color via style element
            const style = document.createElement('style');
            style.textContent = subjects.map((subject, index) => 
                `.calendar-day[data-subject-color="${subject.color}"]::before { background: ${subject.color}; }`
            ).join('\n');
            
            const oldStyle = document.getElementById('dynamic-subject-styles');
            if (oldStyle) oldStyle.remove();
            style.id = 'dynamic-subject-styles';
            document.head.appendChild(style);
            
            updateCalendarIndicators();
        }
        
        function changeMonth(delta) {
            currentMonth += delta;
            if (currentMonth < 3) currentMonth = 3;
            if (currentMonth > 12) currentMonth = 12;
            selectedDate = null;
            initCalendar();
            document.getElementById('scheduleContent').innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">ğŸ“…</div>
                    <h3>ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</h3>
                    <p>ì™¼ìª½ ë‹¬ë ¥ì—ì„œ ì¼ì •ì„ ê´€ë¦¬í•  ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”</p>
                </div>
            `;
        }
        
        function toggleExam() {
            if (!selectedDate) return;
            if (examDates.has(selectedDate)) {
                examDates.delete(selectedDate);
            } else {
                examDates.add(selectedDate);
            }
            saveData();
            initCalendar();
            renderSchedule();
        }
        
        function selectDate(date) {
            selectedDate = date;
            document.querySelectorAll('.calendar-day').forEach(day => {
                day.classList.remove('selected');
                if (day.dataset.date === date) {
                    day.classList.add('selected');
                }
            });
            
            if (!scheduleData[date]) {
                scheduleData[date] = {
                    teams: ['1ì¡°'],
                    teamSchedules: { '1ì¡°': [] },
                    notes: ''
                };
                saveData();
            }
            renderSchedule();
        }
        
        function addTeam() {
            if (!selectedDate) return;
            const data = scheduleData[selectedDate];
            const teamCount = data.teams.length;
            const newTeamName = `${teamCount + 1}ì¡°`;
            data.teams.push(newTeamName);
            data.teamSchedules[newTeamName] = [];
            saveData();
            renderSchedule();
        }
        
        function removeTeam(teamName) {
            if (!selectedDate) return;
            const data = scheduleData[selectedDate];
            if (data.teams.length <= 1) {
                alert('ìµœì†Œ 1ê°œì˜ ì¡°ëŠ” ìˆì–´ì•¼ í•©ë‹ˆë‹¤!');
                return;
            }
            data.teams = data.teams.filter(t => t !== teamName);
            delete data.teamSchedules[teamName];
            saveData();
            renderSchedule();
        }
        
        function renderSchedule() {
            if (!selectedDate) return;
            const data = scheduleData[selectedDate];
            const dateObj = new Date(selectedDate);
            const dateStr = `${dateObj.getMonth() + 1}ì›” ${dateObj.getDate()}ì¼`;
            const isExam = examDates.has(selectedDate);
            
            const content = `
                <div class="schedule-header">
                    <h2>${dateStr} ì¼ì •</h2>
                    <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                        <button class="exam-toggle ${isExam ? 'active' : ''}" onclick="toggleExam()">
                            ${isExam ? 'â­' : 'â˜†'} ì‹œí—˜
                        </button>
                        <button class="add-schedule-btn" onclick="openWeeklyView()" style="padding: 10px 20px; background: #8b5cf6;">ğŸ“… ì£¼ê°„í‘œ</button>
                        <button class="add-schedule-btn" onclick="openTemplateModal()" style="padding: 10px 20px; background: #ec4899;">ğŸ“‹ í…œí”Œë¦¿</button>
                        <button class="add-schedule-btn" onclick="addTeam()" style="padding: 10px 20px;">â• ì¡° ì¶”ê°€</button>
                        <button class="btn-export" onclick="exportSchedule()">ğŸ“¤ ë‚´ë³´ë‚´ê¸°</button>
                    </div>
                </div>
                
                <div class="teams-container">
                    ${data.teams.map(team => `
                        <div class="team-schedule">
                            <div class="team-header">
                                <span class="team-name">${team}</span>
                                <div style="display: flex; gap: 6px;">
                                    <button class="add-schedule-btn" onclick="addScheduleItem('${team}')">+ ì¶”ê°€</button>
                                    ${data.teams.length > 1 ? `<button class="remove-btn" onclick="removeTeam('${team}')" style="padding: 6px 12px;">ğŸ—‘ï¸ ì¡° ì‚­ì œ</button>` : ''}
                                </div>
                            </div>
                            <div id="team-${team}">${renderTeamSchedules(team)}</div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="notes-section">
                    <h3>ì°¸ê³ ì‚¬í•­</h3>
                    <textarea class="notes-textarea" placeholder="ì¶”ê°€ë¡œ ê³µì§€í•  ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”..." onchange="updateNotes(this.value)">${data.notes}</textarea>
                </div>
            `;
            
            document.getElementById('scheduleContent').innerHTML = content;
            updateCalendarIndicators();
        }
        
        function renderTeamSchedules(team) {
            const schedules = scheduleData[selectedDate].teamSchedules[team];
            if (schedules.length === 0) {
                return '<p style="color: var(--text-secondary); font-size: 14px; padding: 10px 0;">ì¼ì •ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”</p>';
            }
            return schedules.map((item, index) => {
                // ê¸°ì¡´ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ (time -> startTime, endTime)
                if (item.time && !item.startTime) {
                    item.startTime = item.time;
                    item.endTime = '';
                }
                
                return `
                <div class="schedule-item" style="display: flex; gap: 8px; margin-bottom: 10px; align-items: center; flex-wrap: wrap;">
                    <input 
                        type="time" 
                        class="time-input" 
                        value="${item.startTime || ''}" 
                        onchange="updateScheduleItem('${team}', ${index}, 'startTime', this.value)"
                        style="width: 90px; padding: 10px 8px; border: 2px solid var(--border); border-radius: 10px; font-size: 14px; font-family: 'JetBrains Mono', monospace; font-weight: 500;"
                    />
                    <span style="color: var(--text-secondary); font-weight: 600;">~</span>
                    <input 
                        type="time" 
                        class="time-input" 
                        value="${item.endTime || ''}" 
                        onchange="updateScheduleItem('${team}', ${index}, 'endTime', this.value)"
                        style="width: 90px; padding: 10px 8px; border: 2px solid var(--border); border-radius: 10px; font-size: 14px; font-family: 'JetBrains Mono', monospace; font-weight: 500;"
                    />
                    <input 
                        type="text" 
                        class="location-input" 
                        placeholder="ì‹¤ìŠµ ì¥ì†Œ ì…ë ¥" 
                        value="${item.location}" 
                        onchange="updateScheduleItem('${team}', ${index}, 'location', this.value)"
                        style="flex: 1; min-width: 150px; padding: 10px 14px; border: 2px solid var(--border); border-radius: 10px; font-size: 14px;"
                    />
                    <button 
                        class="remove-btn" 
                        onclick="removeScheduleItem('${team}', ${index})"
                        style="background: #ef4444; color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 12px; font-weight: 600;">ì‚­ì œ</button>
                </div>
            `;
            }).join('');
        }
        
        function addScheduleItem(team) {
            scheduleData[selectedDate].teamSchedules[team].push({ 
                startTime: '', 
                endTime: '', 
                location: '' 
            });
            saveData();
            renderSchedule();
        }
        
        function removeScheduleItem(team, index) {
            scheduleData[selectedDate].teamSchedules[team].splice(index, 1);
            saveData();
            renderSchedule();
        }
        
        function updateScheduleItem(team, index, field, value) {
            scheduleData[selectedDate].teamSchedules[team][index][field] = value;
            saveData();
            updateCalendarIndicators();
        }
        
        function updateNotes(value) {
            scheduleData[selectedDate].notes = value;
            saveData();
        }
        
        function updateCalendarIndicators() {
            document.querySelectorAll('.calendar-day').forEach(day => {
                if (day.dataset.date && scheduleData[day.dataset.date]) {
                    const data = scheduleData[day.dataset.date];
                    const hasSchedules = data.teams.some(team => 
                        data.teamSchedules[team] && data.teamSchedules[team].length > 0
                    );
                    if (hasSchedules) {
                        day.classList.add('has-schedule');
                    } else {
                        day.classList.remove('has-schedule');
                    }
                }
            });
        }
        
        function addSubject() {
            subjects.push({ name: '', color: colorPalette[0], startDate: '', endDate: '' });
            saveData();
            renderSubjectList();
        }
        
        function removeSubject(index) {
            subjects.splice(index, 1);
            saveData();
            initCalendar();
            renderSubjectList();
        }
        
        function updateSubject(index, field, value) {
            subjects[index][field] = value;
            saveData();
            if (field === 'color' || field === 'startDate' || field === 'endDate') {
                initCalendar();
            }
        }
        
        function toggleColorPicker(index) {
            showingColorPicker = showingColorPicker === index ? null : index;
            renderSubjectList();
        }
        
        function openSubjectModal() {
            document.getElementById('subjectModal').classList.add('show');
            renderSubjectList();
        }
        
        function closeSubjectModal() {
            document.getElementById('subjectModal').classList.remove('show');
            showingColorPicker = null;
        }
        
        // Team members management
        function openMembersModal() {
            document.getElementById('membersModal').classList.add('show');
            renderMembersList();
        }
        
        function closeMembersModal() {
            document.getElementById('membersModal').classList.remove('show');
        }
        
        // Weekly timetable view
        function openWeeklyView() {
            if (!selectedDate) return;
            document.getElementById('weeklyModal').classList.add('show');
            renderWeeklyTimetable();
        }
        
        function closeWeeklyView() {
            document.getElementById('weeklyModal').classList.remove('show');
        }
        
        // Dashboard functions
        function openDashboard() {
            document.getElementById('dashboardModal').classList.add('show');
            renderDashboard();
        }
        
        function closeDashboard() {
            document.getElementById('dashboardModal').classList.remove('show');
        }
        
        // Template management functions
        function openTemplateModal() {
            document.getElementById('templateModal').classList.add('show');
            renderTemplateModal();
        }
        
        function closeTemplateModal() {
            document.getElementById('templateModal').classList.remove('show');
        }
        
        function saveAsTemplate() {
            if (!selectedDate) {
                alert('ë‚ ì§œë¥¼ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const data = scheduleData[selectedDate];
            if (!data || !data.teams || data.teams.length === 0) {
                alert('ì €ì¥í•  ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            const templateName = prompt('í…œí”Œë¦¿ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:', 'ì›”ìš”ì¼ ê¸°ë³¸ ì¼ì •');
            if (!templateName) return;
            
            // ë”¥ ì¹´í”¼
            const templateData = JSON.parse(JSON.stringify({
                teams: data.teams,
                teamSchedules: data.teamSchedules,
                notes: data.notes
            }));
            
            templates.push({
                name: templateName,
                data: templateData,
                createdAt: new Date().toISOString()
            });
            
            saveData();
            alert('âœ… í…œí”Œë¦¿ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
            renderTemplateModal();
        }
        
        function applyTemplate(index) {
            if (!selectedDate) {
                alert('ë‚ ì§œë¥¼ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            if (!confirm('í˜„ì¬ ì¼ì •ì„ í…œí”Œë¦¿ìœ¼ë¡œ ë®ì–´ì“°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }
            
            const template = templates[index];
            const templateData = JSON.parse(JSON.stringify(template.data));
            
            scheduleData[selectedDate] = templateData;
            saveData();
            renderSchedule();
            closeTemplateModal();
            alert('âœ… í…œí”Œë¦¿ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
        
        function deleteTemplate(index) {
            if (!confirm('ì´ í…œí”Œë¦¿ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }
            
            templates.splice(index, 1);
            saveData();
            renderTemplateModal();
        }
        
        function renderTemplateModal() {
            const container = document.getElementById('templateContent');
            if (!container) return;
            
            let html = `
                <div style="margin-bottom: 25px;">
                    <button 
                        class="add-subject-btn" 
                        onclick="saveAsTemplate()"
                        style="background: #ec4899; margin-bottom: 10px;">
                        ğŸ’¾ í˜„ì¬ ì¼ì •ì„ í…œí”Œë¦¿ìœ¼ë¡œ ì €ì¥
                    </button>
                    <p style="color: var(--text-secondary); font-size: 14px; text-align: center;">
                        í˜„ì¬ ì„ íƒí•œ ë‚ ì§œì˜ ì¼ì •ì´ í…œí”Œë¦¿ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤
                    </p>
                </div>
                
                <div style="border-top: 2px solid var(--border); padding-top: 25px;">
                    <h3 style="font-size: 18px; font-weight: 700; color: var(--primary); margin-bottom: 20px;">ğŸ“‹ ì €ì¥ëœ í…œí”Œë¦¿ (${templates.length}ê°œ)</h3>
            `;
            
            if (templates.length === 0) {
                html += `
                    <div style="text-align: center; padding: 40px 20px; color: var(--text-secondary);">
                        <div style="font-size: 48px; margin-bottom: 15px;">ğŸ“‹</div>
                        <h3 style="font-size: 18px; color: var(--text-primary); margin-bottom: 8px;">ì €ì¥ëœ í…œí”Œë¦¿ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p>ìì£¼ ì‚¬ìš©í•˜ëŠ” ì¼ì •ì„ í…œí”Œë¦¿ìœ¼ë¡œ ì €ì¥í•´ë³´ì„¸ìš”!</p>
                    </div>
                `;
            } else {
                html += '<div class="subject-list">';
                templates.forEach((template, index) => {
                    const createdDate = new Date(template.createdAt);
                    const dateStr = `${createdDate.getMonth() + 1}/${createdDate.getDate()}`;
                    const teamCount = template.data.teams.length;
                    let scheduleCount = 0;
                    template.data.teams.forEach(team => {
                        scheduleCount += (template.data.teamSchedules[team] || []).length;
                    });
                    
                    html += `
                        <div class="subject-item" style="background: var(--bg-main); border: 2px solid var(--border); border-radius: 12px; padding: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                                <div style="flex: 1;">
                                    <h4 style="font-size: 18px; font-weight: 700; color: var(--primary); margin-bottom: 8px;">${template.name}</h4>
                                    <div style="display: flex; gap: 15px; font-size: 14px; color: var(--text-secondary);">
                                        <span>ğŸ‘¥ ${teamCount}ê°œ ì¡°</span>
                                        <span>ğŸ“… ${scheduleCount}ê°œ ì¼ì •</span>
                                        <span>ğŸ• ${dateStr} ìƒì„±</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 8px;">
                                <button 
                                    onclick="applyTemplate(${index})"
                                    style="flex: 1; background: #ec4899; color: white; border: none; padding: 12px; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer;">
                                    âœ… ì ìš©í•˜ê¸°
                                </button>
                                <button 
                                    onclick="deleteTemplate(${index})"
                                    style="background: #ef4444; color: white; border: none; padding: 12px 16px; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer;">
                                    ğŸ—‘ï¸ ì‚­ì œ
                                </button>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function renderDashboard() {
            const container = document.getElementById('dashboardContent');
            if (!container) return;
            
            // 1. ì „ì²´ ì¼ì • ê°œìˆ˜
            const totalSchedules = Object.keys(scheduleData).length;
            
            // 2. ì‹œí—˜ ê°œìˆ˜ì™€ ê°€ì¥ ê°€ê¹Œìš´ ì‹œí—˜
            const examList = Array.from(examDates).sort();
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
            
            const upcomingExams = examList.filter(d => d >= todayStr);
            let nextExamInfo = '';
            if (upcomingExams.length > 0) {
                const nextExam = new Date(upcomingExams[0]);
                const daysUntil = Math.ceil((nextExam - today) / (1000 * 60 * 60 * 24));
                nextExamInfo = `<span style="color: #dc2626; font-weight: 700; font-size: 24px;">D-${daysUntil}</span><br>${nextExam.getMonth() + 1}ì›” ${nextExam.getDate()}ì¼`;
            } else {
                nextExamInfo = '<span style="color: var(--text-secondary);">ì˜ˆì •ëœ ì‹œí—˜ ì—†ìŒ</span>';
            }
            
            // 3. ê³¼ë³„ ë¡œí…Œì´ì…˜ ê¸°ê°„
            const subjectsSorted = subjects.sort((a, b) => a.startDate.localeCompare(b.startDate));
            
            // 4. ì´ë²ˆ ë‹¬ ì¼ì • í†µê³„
            const currentMonthSchedules = Object.keys(scheduleData).filter(date => {
                return date.startsWith(`${currentYear}-${String(currentMonth).padStart(2, '0')}`);
            });
            
            // 5. ì „ì²´ ì§„í–‰ë¥  (3ì›”~12ì›”)
            const totalDays = 275; // 3ì›”~12ì›” ëŒ€ëµ 275ì¼
            const today2 = new Date();
            const marchFirst = new Date(2026, 2, 1); // 2026ë…„ 3ì›” 1ì¼
            const daysPassed = Math.max(0, Math.ceil((today2 - marchFirst) / (1000 * 60 * 60 * 24)));
            const progress = Math.min(100, Math.round((daysPassed / totalDays) * 100));
            
            let html = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <!-- ì¹´ë“œ 1: ë“±ë¡ëœ ì¼ì • -->
                    <div style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border-left: 5px solid #3b82f6; padding: 20px; border-radius: 12px;">
                        <div style="font-size: 14px; color: #1e40af; font-weight: 600; margin-bottom: 8px;">ğŸ“… ë“±ë¡ëœ ì¼ì •</div>
                        <div style="font-size: 32px; font-weight: 700; color: #1e3a8a;">${totalSchedules}ê°œ</div>
                        <div style="font-size: 12px; color: #3b82f6; margin-top: 5px;">ì´ë²ˆ ë‹¬: ${currentMonthSchedules.length}ê°œ</div>
                    </div>
                    
                    <!-- ì¹´ë“œ 2: ë‹¤ìŒ ì‹œí—˜ -->
                    <div style="background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); border-left: 5px solid #ef4444; padding: 20px; border-radius: 12px;">
                        <div style="font-size: 14px; color: #991b1b; font-weight: 600; margin-bottom: 8px;">â­ ë‹¤ìŒ ì‹œí—˜</div>
                        <div style="font-size: 20px; font-weight: 700; color: #7f1d1d;">${nextExamInfo}</div>
                        <div style="font-size: 12px; color: #dc2626; margin-top: 5px;">ì „ì²´ ${examList.length}ê°œ</div>
                    </div>
                    
                    <!-- ì¹´ë“œ 3: ê³¼ ê°œìˆ˜ -->
                    <div style="background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); border-left: 5px solid #22c55e; padding: 20px; border-radius: 12px;">
                        <div style="font-size: 14px; color: #15803d; font-weight: 600; margin-bottom: 8px;">ğŸ“š ë“±ë¡ëœ ê³¼</div>
                        <div style="font-size: 32px; font-weight: 700; color: #14532d;">${subjects.length}ê°œ</div>
                        <div style="font-size: 12px; color: #22c55e; margin-top: 5px;">ë¡œí…Œì´ì…˜ ê³¼ëª©</div>
                    </div>
                    
                    <!-- ì¹´ë“œ 4: ì§„í–‰ë¥  -->
                    <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 5px solid #f59e0b; padding: 20px; border-radius: 12px;">
                        <div style="font-size: 14px; color: #92400e; font-weight: 600; margin-bottom: 8px;">ğŸ“ˆ ì „ì²´ ì§„í–‰ë¥ </div>
                        <div style="font-size: 32px; font-weight: 700; color: #78350f;">${progress}%</div>
                        <div style="font-size: 12px; color: #d97706; margin-top: 5px;">3ì›”~12ì›” ê¸°ì¤€</div>
                    </div>
                </div>
                
                <!-- ê³¼ë³„ ë¡œí…Œì´ì…˜ ê¸°ê°„ -->
                <div style="background: white; border: 2px solid var(--border); border-radius: 16px; padding: 25px; margin-bottom: 20px;">
                    <h3 style="font-size: 18px; font-weight: 700; color: var(--primary); margin-bottom: 20px;">ğŸ“š ê³¼ë³„ ë¡œí…Œì´ì…˜ ê¸°ê°„</h3>
            `;
            
            if (subjects.length === 0) {
                html += '<p style="color: var(--text-secondary); text-align: center; padding: 20px;">ë“±ë¡ëœ ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</p>';
            } else {
                html += '<div style="display: flex; flex-direction: column; gap: 12px;">';
                subjectsSorted.forEach(subject => {
                    const startDate = subject.startDate ? new Date(subject.startDate) : null;
                    const endDate = subject.endDate ? new Date(subject.endDate) : null;
                    
                    let dateDisplay = 'ê¸°ê°„ ë¯¸ì •';
                    let daysCount = 0;
                    
                    if (startDate && endDate) {
                        const start = `${startDate.getMonth() + 1}/${startDate.getDate()}`;
                        const end = `${endDate.getMonth() + 1}/${endDate.getDate()}`;
                        daysCount = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;
                        dateDisplay = `${start} ~ ${end} (${daysCount}ì¼)`;
                    }
                    
                    html += `
                        <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: var(--bg-main); border-radius: 10px; border-left: 4px solid ${subject.color};">
                            <div style="width: 20px; height: 20px; background: ${subject.color}; border-radius: 4px;"></div>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; font-size: 16px; color: var(--text-primary); margin-bottom: 3px;">${subject.name || 'ì´ë¦„ ì—†ìŒ'}</div>
                                <div style="font-size: 14px; color: var(--text-secondary);">${dateDisplay}</div>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            html += `
                </div>
                
                <!-- ì‹œí—˜ ì¼ì • -->
                <div style="background: white; border: 2px solid var(--border); border-radius: 16px; padding: 25px;">
                    <h3 style="font-size: 18px; font-weight: 700; color: var(--primary); margin-bottom: 20px;">â­ ì‹œí—˜ ì¼ì •</h3>
            `;
            
            if (examList.length === 0) {
                html += '<p style="color: var(--text-secondary); text-align: center; padding: 20px;">ë“±ë¡ëœ ì‹œí—˜ì´ ì—†ìŠµë‹ˆë‹¤</p>';
            } else {
                html += '<div style="display: flex; flex-direction: column; gap: 10px;">';
                examList.forEach(dateStr => {
                    const examDate = new Date(dateStr);
                    const dayOfWeek = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '][examDate.getDay()];
                    const daysUntil = Math.ceil((examDate - today) / (1000 * 60 * 60 * 24));
                    const isPast = dateStr < todayStr;
                    const isToday = dateStr === todayStr;
                    
                    let badge = '';
                    if (isToday) {
                        badge = '<span style="background: #dc2626; color: white; padding: 3px 8px; border-radius: 6px; font-size: 12px; font-weight: 700;">ì˜¤ëŠ˜</span>';
                    } else if (!isPast) {
                        badge = `<span style="background: #fbbf24; color: #78350f; padding: 3px 8px; border-radius: 6px; font-size: 12px; font-weight: 700;">D-${daysUntil}</span>`;
                    } else {
                        badge = '<span style="background: #d1d5db; color: #6b7280; padding: 3px 8px; border-radius: 6px; font-size: 12px; font-weight: 700;">ì¢…ë£Œ</span>';
                    }
                    
                    html += `
                        <div style="display: flex; align-items: center; gap: 12px; padding: 12px; background: ${isPast ? '#f9fafb' : '#fef3c7'}; border-radius: 8px; ${isPast ? 'opacity: 0.6;' : ''}">
                            <div style="font-size: 24px;">â­</div>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; font-size: 15px; color: var(--text-primary);">${examDate.getMonth() + 1}ì›” ${examDate.getDate()}ì¼ (${dayOfWeek})</div>
                            </div>
                            ${badge}
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            html += '</div>';
            
            container.innerHTML = html;
        }
        
        function getWeekDates(dateStr) {
            const date = new Date(dateStr);
            const dayOfWeek = date.getDay(); // 0=ì¼, 1=ì›”, ..., 6=í† 
            
            // ì›”ìš”ì¼ ì°¾ê¸° (dayOfWeek === 1)
            const monday = new Date(date);
            const diff = dayOfWeek === 0 ? -6 : 1 - dayOfWeek; // ì¼ìš”ì¼ì´ë©´ ì§€ë‚œì£¼ ì›”ìš”ì¼
            monday.setDate(date.getDate() + diff);
            
            // ì›”~ê¸ˆ ë‚ ì§œ ë°°ì—´ ìƒì„±
            const weekDates = [];
            for (let i = 0; i < 5; i++) {
                const d = new Date(monday);
                d.setDate(monday.getDate() + i);
                weekDates.push(d);
            }
            
            return weekDates;
        }
        
        function renderWeeklyTimetable() {
            const container = document.getElementById('weeklyContent');
            if (!container || !selectedDate) return;
            
            const weekDates = getWeekDates(selectedDate);
            const dayNames = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ'];
            
            // ì£¼ì°¨ ì •ë³´
            const firstDate = weekDates[0];
            const lastDate = weekDates[4];
            const weekTitle = `${firstDate.getMonth() + 1}ì›” ${firstDate.getDate()}ì¼ ~ ${lastDate.getMonth() + 1}ì›” ${lastDate.getDate()}ì¼`;
            
            // ì‹œê°„ëŒ€ ì„¤ì • (09:00 ~ 17:00, 1ì‹œê°„ ë‹¨ìœ„)
            const timeSlots = [];
            for (let hour = 9; hour <= 17; hour++) {
                timeSlots.push(`${String(hour).padStart(2, '0')}:00`);
            }
            
            let html = `
                <div style="margin-bottom: 20px; text-align: center;">
                    <h3 style="font-size: 20px; font-weight: 700; color: var(--primary); margin-bottom: 5px;">ì£¼ê°„ ì‹œê°„í‘œ</h3>
                    <p style="color: var(--text-secondary); font-size: 16px;">${weekTitle}</p>
                </div>
                
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; min-width: 800px; background: white; box-shadow: 0 2px 8px var(--shadow);">
                        <thead>
                            <tr style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white;">
                                <th style="border: 2px solid #e5e7eb; padding: 15px 10px; font-size: 15px; font-weight: 700; width: 100px;">ì‹œê°„</th>
            `;
            
            // ìš”ì¼ í—¤ë”
            weekDates.forEach((date, index) => {
                const dateStr = `${date.getMonth() + 1}/${date.getDate()}`;
                html += `<th style="border: 2px solid #e5e7eb; padding: 15px 10px; font-size: 15px; font-weight: 700;">${dayNames[index]}<br><span style="font-size: 13px; font-weight: 400;">(${dateStr})</span></th>`;
            });
            
            html += `</tr></thead><tbody>`;
            
            // ì‹œê°„ëŒ€ë³„ í–‰
            timeSlots.forEach(timeSlot => {
                html += `<tr>`;
                html += `<td style="border: 2px solid #e5e7eb; padding: 12px 8px; font-weight: 600; font-size: 14px; text-align: center; background: #f9fafb; font-family: 'JetBrains Mono', monospace;">${timeSlot}</td>`;
                
                // ê° ìš”ì¼ë³„ ì…€
                weekDates.forEach(date => {
                    const dateStr = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;
                    const dayData = scheduleData[dateStr];
                    
                    let cellContent = '';
                    
                    if (dayData && dayData.teams) {
                        // ì´ ì‹œê°„ëŒ€ì— í•´ë‹¹í•˜ëŠ” ì¼ì • ì°¾ê¸°
                        dayData.teams.forEach(team => {
                            const schedules = dayData.teamSchedules[team] || [];
                            schedules.forEach(item => {
                                const startTime = item.startTime || item.time || '';
                                const endTime = item.endTime || '';
                                
                                // ì‹œê°„ì´ ì´ ìŠ¬ë¡¯ì— í•´ë‹¹í•˜ëŠ”ì§€ í™•ì¸
                                if (startTime && startTime.startsWith(timeSlot.substring(0, 2))) {
                                    const timeDisplay = endTime ? `${startTime}~${endTime}` : startTime;
                                    cellContent += `<div style="background: linear-gradient(135deg, #ddd6fe 0%, #c4b5fd 100%); border-left: 4px solid #8b5cf6; padding: 8px; margin-bottom: 6px; border-radius: 6px; font-size: 13px;">`;
                                    cellContent += `<div style="font-weight: 700; color: #5b21b6; margin-bottom: 3px;">${team}</div>`;
                                    cellContent += `<div style="color: #6d28d9; font-size: 12px; margin-bottom: 2px;">${timeDisplay}</div>`;
                                    cellContent += `<div style="color: #4c1d95; font-size: 12px;">${item.location || ''}</div>`;
                                    cellContent += `</div>`;
                                }
                            });
                        });
                    }
                    
                    html += `<td style="border: 2px solid #e5e7eb; padding: 8px; vertical-align: top; min-height: 60px; background: ${cellContent ? '#faf5ff' : 'white'};">${cellContent || '<span style="color: #d1d5db;">-</span>'}</td>`;
                });
                
                html += `</tr>`;
            });
            
            html += `</tbody></table></div>`;
            
            html += `
                <div style="margin-top: 20px; padding: 15px; background: #fef3c7; border: 2px solid #fbbf24; border-radius: 12px; text-align: center;">
                    <p style="color: #92400e; font-size: 14px; margin: 0;">ğŸ’¡ ìŠ¤í¬ë¦°ìƒ·ì„ ì°ì–´ì„œ ë‹¨í†¡ë°©ì— ê³µìœ í•˜ì„¸ìš”!</p>
                </div>
            `;
            
            container.innerHTML = html;
        }
        
        function addMember(teamName) {
            if (!teamMembers[teamName]) {
                teamMembers[teamName] = [];
            }
            teamMembers[teamName].push({ name: '', phone: '' });
            saveData();
            renderMembersList();
        }
        
        function removeMember(teamName, index) {
            teamMembers[teamName].splice(index, 1);
            saveData();
            renderMembersList();
        }
        
        function updateMember(teamName, index, field, value) {
            teamMembers[teamName][index][field] = value;
            saveData();
        }
        
        function renderMembersList() {
            const container = document.getElementById('membersContent');
            if (!container) return;
            
            let html = '<div class="subject-list">';
            
            Object.keys(teamMembers).sort().forEach(teamName => {
                const members = teamMembers[teamName] || [];
                
                html += `
                    <div class="subject-item" style="background: var(--bg-main); border: 2px solid var(--border); border-radius: 12px; padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3 style="font-size: 18px; font-weight: 700; color: var(--primary); margin: 0;">${teamName}</h3>
                            <button class="add-schedule-btn" onclick="addMember('${teamName}')" style="padding: 8px 16px; font-size: 14px;">+ ì¡°ì› ì¶”ê°€</button>
                        </div>
                `;
                
                if (members.length === 0) {
                    html += '<p style="color: var(--text-secondary); font-size: 14px; padding: 10px 0;">ì¡°ì›ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”</p>';
                } else {
                    members.forEach((member, index) => {
                        html += `
                            <div style="display: flex; gap: 10px; margin-bottom: 10px; align-items: center;">
                                <input 
                                    type="text" 
                                    placeholder="ì´ë¦„" 
                                    value="${member.name}"
                                    onchange="updateMember('${teamName}', ${index}, 'name', this.value)"
                                    style="flex: 1; padding: 10px 14px; border: 2px solid var(--border); border-radius: 10px; font-size: 14px;"
                                />
                                <input 
                                    type="tel" 
                                    placeholder="ì „í™”ë²ˆí˜¸" 
                                    value="${member.phone}"
                                    onchange="updateMember('${teamName}', ${index}, 'phone', this.value)"
                                    style="flex: 1; padding: 10px 14px; border: 2px solid var(--border); border-radius: 10px; font-size: 14px;"
                                />
                                <button 
                                    onclick="removeMember('${teamName}', ${index})"
                                    style="background: #ef4444; color: white; border: none; padding: 10px 14px; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: 600;">ì‚­ì œ</button>
                            </div>
                        `;
                    });
                }
                
                html += `</div>`;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function renderSubjectList() {
            const container = document.getElementById('subjectList');
            
            if (!container) return;
            
            if (subjects.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: var(--text-secondary);">
                        <h3 style="font-size: 18px; color: var(--text-primary); margin-bottom: 8px;">ğŸ“š ë“±ë¡ëœ ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p>ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ê³¼ë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            subjects.forEach((subject, index) => {
                html += `
                    <div class="subject-item" style="background: var(--bg-main); border: 2px solid var(--border); border-radius: 12px; padding: 20px; transition: all 0.2s ease;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 15px; flex-wrap: wrap;">
                            <div class="subject-color-picker" style="background: ${subject.color}; cursor: pointer;" onclick="toggleColorPicker(${index})"></div>
                            <input type="text" class="subject-input" placeholder="ê³¼ ì´ë¦„ ì…ë ¥ (ì˜ˆ: ì‚°ë¶€ì¸ê³¼)" value="${subject.name}" onchange="updateSubject(${index}, 'name', this.value)" style="flex: 1; min-width: 150px; padding: 12px 16px; border: 2px solid var(--border); border-radius: 10px; font-size: 15px;" />
                            <button class="remove-subject-btn" onclick="removeSubject(${index})" style="background: #ef4444; color: white; border: none; padding: 10px 16px; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">ğŸ—‘ï¸ ì‚­ì œ</button>
                        </div>
                        <div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">
                            <input type="date" class="date-input" value="${subject.startDate}" onchange="updateSubject(${index}, 'startDate', this.value)" min="2026-03-01" max="2026-12-31" style="width: 140px; padding: 12px 16px; border: 2px solid var(--border); border-radius: 10px; font-size: 15px;" />
                            <span style="font-weight: 600; color: var(--text-secondary);">~</span>
                            <input type="date" class="date-input" value="${subject.endDate}" onchange="updateSubject(${index}, 'endDate', this.value)" min="2026-03-01" max="2026-12-31" style="width: 140px; padding: 12px 16px; border: 2px solid var(--border); border-radius: 10px; font-size: 15px;" />
                        </div>
                `;
                
                if (showingColorPicker === index) {
                    html += `
                        <div class="color-palette" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; padding: 12px; background: white; border: 2px solid #e5e7eb; border-radius: 10px; margin-top: 12px;">
                            ${colorPalette.map(color => `
                                <div class="color-option ${subject.color === color ? 'selected' : ''}" 
                                     style="background: ${color}; width: 45px; height: 45px; border-radius: 8px; cursor: pointer; border: 3px solid ${subject.color === color ? 'var(--text-primary)' : 'transparent'}; transition: all 0.2s ease;" 
                                     onclick="updateSubject(${index}, 'color', '${color}'); toggleColorPicker(${index});"></div>
                            `).join('')}
                        </div>
                    `;
                }
                
                html += `</div>`;
            });
            
            container.innerHTML = html;
        }
        
        function exportSchedule() {
            if (!selectedDate) return;
            const data = scheduleData[selectedDate];
            const dateObj = new Date(selectedDate);
            const dateStr = `${dateObj.getMonth() + 1}ì›” ${dateObj.getDate()}ì¼`;
            const dayOfWeek = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '][dateObj.getDay()];
            const subject = getSubjectForDate(selectedDate);
            const isExam = examDates.has(selectedDate);
            
            let message = `ğŸ“… ${dateStr}(${dayOfWeek}) ë¡œí…Œì´ì…˜ ì¼ì •\n`;
            if (subject) message += `ğŸ“š ${subject.name}\n`;
            if (isExam) message += `â­ ì‹œí—˜ì¼\n`;
            message += `${'='.repeat(40)}\n\n`;
            
            data.teams.forEach(team => {
                const schedules = data.teamSchedules[team];
                message += `ã€ ${team} ã€‘\n`;
                
                // ì¡°ì› ëª…ë‹¨ ì¶”ê°€
                if (teamMembers[team] && teamMembers[team].length > 0) {
                    const memberNames = teamMembers[team].map(m => m.name).filter(n => n).join(', ');
                    if (memberNames) {
                        message += `  ì¡°ì›: ${memberNames}\n`;
                    }
                }
                
                // ì¼ì • ì¶”ê°€
                if (schedules && schedules.length > 0) {
                    schedules.forEach(item => {
                        // ê¸°ì¡´ ë°ì´í„° í˜¸í™˜ (time)
                        const startTime = item.startTime || item.time;
                        const endTime = item.endTime;
                        
                        if (startTime && item.location) {
                            if (endTime) {
                                message += `  ${startTime} ~ ${endTime}  â†’  ${item.location}\n`;
                            } else {
                                message += `  ${startTime}  â†’  ${item.location}\n`;
                            }
                        }
                    });
                }
                message += `\n`;
            });
            
            if (data.notes.trim()) {
                message += `ğŸ“Œ ì°¸ê³ ì‚¬í•­\n${'-'.repeat(40)}\n${data.notes}\n`;
            }
            
            message += `\n${'='.repeat(40)}`;
            document.getElementById('exportMessage').textContent = message;
            document.getElementById('exportModal').classList.add('show');
        }
        
        function closeModal() {
            document.getElementById('exportModal').classList.remove('show');
        }
        
        function copyToClipboard() {
            const message = document.getElementById('exportMessage').textContent;
            navigator.clipboard.writeText(message).then(() => {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = 'âœ“ ë³µì‚¬ ì™„ë£Œ!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('copied');
                }, 2000);
            });
        }
        
        document.getElementById('exportModal').addEventListener('click', (e) => {
            if (e.target.id === 'exportModal') closeModal();
        });
        
        // ë°ì´í„° ë²„ì „ ì²´í¬ ë° ë§ˆì´ê·¸ë ˆì´ì…˜
        const DATA_VERSION = '2.0';
        const savedVersion = localStorage.getItem('rotationDataVersion');
        
        if (savedVersion !== DATA_VERSION) {
            console.log('ë°ì´í„° êµ¬ì¡° ë³€ê²½ ê°ì§€ - ì´ˆê¸°í™” ì¤‘...');
            localStorage.removeItem('rotationScheduleData');
            localStorage.removeItem('rotationSubjects');
            localStorage.removeItem('rotationExams');
            localStorage.setItem('rotationDataVersion', DATA_VERSION);
            alert('ì•±ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤!\nê¸°ì¡´ ë°ì´í„°ì™€ í˜¸í™˜ë˜ì§€ ì•Šì•„ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }
        
        // ì•ˆì „í•œ ì´ˆê¸°í™”
        try {
            loadData();
            console.log('ë°ì´í„° ë¡œë“œ ì™„ë£Œ');
        } catch (e) {
            console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', e);
            alert('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨: ' + e.message);
        }
        
        try {
            initCalendar();
            console.log('ìº˜ë¦°ë” ì´ˆê¸°í™” ì™„ë£Œ');
        } catch (e) {
            console.error('ìº˜ë¦°ë” ì´ˆê¸°í™” ì‹¤íŒ¨:', e);
            alert('ìº˜ë¦°ë” ì´ˆê¸°í™” ì‹¤íŒ¨: ' + e.message);
        }
        
        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.getElementById('subjectModal').addEventListener('click', (e) => {
            if (e.target.id === 'subjectModal') {
                closeSubjectModal();
            }
        });
        
        document.getElementById('membersModal').addEventListener('click', (e) => {
            if (e.target.id === 'membersModal') {
                closeMembersModal();
            }
        });
        
        document.getElementById('weeklyModal').addEventListener('click', (e) => {
            if (e.target.id === 'weeklyModal') {
                closeWeeklyView();
            }
        });
        
        document.getElementById('dashboardModal').addEventListener('click', (e) => {
            if (e.target.id === 'dashboardModal') {
                closeDashboard();
            }
        });
        
        document.getElementById('templateModal').addEventListener('click', (e) => {
            if (e.target.id === 'templateModal') {
                closeTemplateModal();
            }
        });
        
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed'));
            });
        }
    </script>
</body>
</html>
